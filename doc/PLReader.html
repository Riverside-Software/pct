<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>

<head>
<title>PLReader class - Exploring Progress archives</title>
<meta http-equiv="Content-language" content="fr"/>
<meta http-equiv="Content-type" content="text/html; charset=utf-8"/>
<meta name="DC.Language" content="fr"/>
<link rel="stylesheet" type="text/css" href="style.css" media="screen" title="Normal"/>
</head>

<body>
<div class="Main">

<div class="Bandeau">
Progress&reg; Compilation Tools
</div>

<div class="Menu">
<a href="index.html">Overview</a> :: <a href="download.html">Download</a> :: <a href="manual.html">Documentation</a> :: <a href="javadoc/index.html">JavaDoc</a> :: PLReader
</div>

<div class="Text">
<h1>Overview</h1>
<p>
The PLReader class was developed during my attempt to setup JUnit tests for PCT. I needed a way to check
files were correctly added in archives with the PCTLibrary task.
</p>
<p>
Using an hex editor and the PROLIB utility, I tried to guess the structure of a PL file. A library
is divided into 3 parts :</p>
<ul>
<li>Header : describes codepage, and a pointer to the files list</li>
<li>Files content</li>
<li>Files list : </li>
</ul>
<table>
<tr>
<th colspan="3">Header</th>
</tr>
<tr>
<th>Offset</th>
<th>Size (in bytes)</th>
<th>Description</th>
</tr>
<tr>
<td>0x00</td>
<td>2</td>
<td>Magic number : always 0xD707</td>
</tr>
<tr>
<td>0x02</td>
<td>20</td>
<td>Codepage used to store file names</td>
</tr>
<tr>
<td>0x16</td>
<td>4</td>
<td>Unknown</td>
</tr>
<tr>
<td>0x1A</td>
<td>4</td>
<td>Files list's offset</td>
</tr>
</table>

<p>Each file in the files list is a sequence of bytes, which are described here :</p>
<table>
<tr>
<th colspan="3">Files list entry</th>
</tr>
<tr>
<th>Offset</th>
<th>Size (in bytes)</th>
<th>Description</th>
</tr>
<tr>
<td>0x00</td>
<td>1</td>
<td>Magic number : if 0xFF, it's a file entry, if 0xFE jump to the next 0xFF</td>
</tr>
<tr>
<td>0x01</td>
<td>1</td>
<td>Size of the file name (noted SZ)</td>
</tr>
<tr>
<td>0x02</td>
<td>SZ</td>
<td>File name</td>
</tr>
<tr>
<td>0x02 + SZ</td>
<td>2</td>
<td>Unknown</td>
</tr>
<tr>
<td>0x04 + SZ</td>
<td>4</td>
<td>Offset of the beginning of the file content</td>
</tr>
<tr>
<td>0x08 + SZ</td>
<td>1</td>
<td>Unknown (always FF)</td>
</tr>
<tr>
<td>0x09 + SZ</td>
<td>4</td>
<td>File size (in bytes)</td>
</tr>
<tr>
<td>0x13 + SZ</td>
<td>4</td>
<td>Added to archive (in seconds since 1/1/1970)</td>
</tr>
<tr>
<td>0x17 + SZ</td>
<td>4</td>
<td>Modification timestamp (in seconds since 1/1/1970)</td>
</tr>
<tr>
<td>0x21 + SZ</td>
<td>8</td>
<td>Always 0x00000000</td>
</tr>
</table>

</div>

<div class="LastUpdate">
Last update : 14th November, 2003
</div>

</div>
</body>

</html>

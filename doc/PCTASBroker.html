<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    
<html>

<head>
<meta http-equiv="Content-type" content="text/html; charset=utf-8" />
<meta http-equiv="Content-language" content="en" />
<meta name="Keywords" content="progress,ant,compilation,automated,task,querret,apache,build tools,roundtable" />
<meta name="Description" content="PCT is set of ANT tasks designed to compile Progress procedures among others things" />
<meta name="revisit-after" content="30 days" />
<meta name="DC.Language" content="en" />
<title>PCT documentation - PCTASBroker task</title>
<link rel="stylesheet" type="text/css" href="style.css" media="screen" title="Normal" />
</head>
<body>

<div class="Main">

<div class="Bandeau">
  <span id="sflogo">
    <a href="http://sourceforge.net"><img id="sflogoimg" alt="SourceForge.net Logo" height="31" width="88" src="http://sourceforge.net/sflogo.php?group_id=%3Cb%3E85743%3C/b%3E&amp;amp;type=1"/></a>
  </span>
  Progress&reg; OpenEdge&reg; Compilation Tools
</div>

<div class="Menu">
  <a href="index.html">Overview</a>
  :: <a href="download.html">Download</a>
  :: <a href="screenshots.html">Screenshots</a>
  :: <span class="selected">Documentation</span>
  :: <a href="javadoc/index.html">JavaDoc</a>
  :: <a href="links.html">Links</a>
</div>

@RIGHT_BANNER@

<div class="Text">
<h1>PCTASBroker task -- &lt;pct:asbroker /&gt;</h1>

<h2>Description</h2>
<p>Adds, updates and deletes appservers brokers declarations</p>

<h2>Parameters</h2>
<table class="params">
<tr>
<th>Attribute</th>
<th>Description</th>
<th>Type</th>
<th>Requirement</th>
<th>Default value</th>
</tr>
<tr>
<td>Name</td>
<td>Appserver's name</td>
<td align="center">String</td>
<td align="center">Required</td>
<td>No default value</td>
</tr>
<tr>
<td>Action</td>
<td>Must be one of create, update, delete</td>
<td align="center">String</td>
<td align="center">Required</td>
<td>No default value</td>
</tr>
<tr>
<td>OperatingMode</td>
<td>Should be stateless, state-aware, state-reset or state-free</td>
<td align="center">String</td>
<td align="center">Optional</td>
<td>Stateless</td>
</tr>
<tr>
<td>WorkDir</td>
<td>Working directory</td>
<td align="center">File</td>
<td align="center">Optional</td>
<td>No default value</td>
</tr>
<tr>
<td>PortNumber</td>
<td></td>
<td align="center">Integer</td>
<td align="center">Optional</td>
<td>No default value</td>
</tr>
<tr>
<td>AutoStart</td>
<td></td>
<td align="center">Boolean</td>
<td align="center">Optional</td>
<td>False</td>
</tr>
<tr>
<td>BrokerLogFile</td>
<td>Broker's log file</td>
<td align="center">File</td>
<td align="center">Required</td>
<td>No default value</td>
</tr>
<tr>
<td>BrokerLogLevel</td>
<td>Should be between 1 and 5</td>
<td align="center">Integer</td>
<td align="center">Optional</td>
<td>No default value</td>
</tr>
<tr>
<td>BrokerLogFileAppend</td>
<td>Append to broker log file</td>
<td align="center">Boolean</td>
<td align="center">Optional</td>
<td>True</td>
</tr>
<tr>
<td>ServerLogFile</td>
<td>Server's log file</td>
<td align="center">File</td>
<td align="center">Optional</td>
<td>No default value</td>
</tr>
<tr>
<td>ServerLogLevel</td>
<td>Should be between 1 and 5</td>
<td align="center">Integer</td>
<td align="center">Optional</td>
<td>No default value</td>
</tr>
<tr>
<td>ServerLogFileAppend</td>
<td>Append to server log file</td>
<td align="center">Boolean</td>
<td align="center">Optional</td>
<td>True</td>
</tr>
<tr>
<td>InitialPool</td>
<td>Initial number of servers to start</td>
<td align="center">Integer</td>
<td align="center">Optional</td>
<td>No default value</td>
</tr>
<tr>
<td>MinPool</td>
<td>Minimum number of servers</td>
<td align="center">Integer</td>
<td align="center">Optional</td>
<td>No default value</td>
</tr>
<tr>
<td>MaxPool</td>
<td>Maximum number of servers</td>
<td align="center">Integer</td>
<td align="center">Optional</td>
<td>No default value</td>
</tr>
<tr>
<td>NameServer</td>
<td>Controlling name server</td>
<td align="center">String</td>
<td align="center">Optional</td>
<td>NS1</td>
</tr>
</table>

<h2>Parameters as nested elements</h2>
<h3>server (com.phenix.pct.PCTASServer)</h3>
<p>
Definition of servers processes ; Inherits from attributes of PCTRun task, except for the followings :</p><ul>
<li><em>procedure</em> attribute is removed</li>
<li><em>graphicalMode</em> attribute is removed</li>
<li><em>debugPCT</em> attribute is removed</li>
<li><em>baseDir</em> attribute is removed</li>
<li><em>activateProc</em> attribute is added</li>
<li><em>deactivateProc</em> attribute is added</li>
<li><em>startupProc</em> attribute is added</li>
<li><em>shutdownProc</em> attribute is added</li>
<li><em>connectProc</em> attribute is added</li>
<li><em>disconnectProc</em> attribute is added</li>
</ul>


<h2>Examples</h2>
<pre>
&lt;PCTASBroker action="create" name="Test" dlcHome="${env.DLC}" /&gt;
</pre>
<p>
Simplest declaration : this will create a [UBroker.AS.Test] section in the $DLC/properties/ubroker.properties file.
In this case, every attribute is inherited from parent sections.
</p>

<pre>
&lt;PCTASBroker action="update" name="Test" dlcHome="${env.DLC}" portNumber="1234" /&gt;
</pre>
<p>
Updates the previously created appserver, by adding portNumber property.
</p>

<pre>
&lt;PCTASBroker action="delete" name="Test" dlcHome="${env.DLC}" /&gt;
</pre>
<p>
Deletes the previously created appserver.
</p>

<pre>
&lt;PCTASBroker action="delete" name="Test" dlcHome="${env.DLC}" file="myubroker.properties" uid="auto"&gt;
  &lt;server startupProc="apsv/startup.p" shutdownProc="apsv/shutdown.p" paramFile="conf/param.pf"&gt;
    &lt;propath&gt;
      &lt;pathelement path="build" /&gt;
      &lt;pathelement path="src" /&gt;
    &lt;/propath&gt;
    &lt;PCTConnection dbName="foo" dbDir="base" /&gt;
    &lt;PCTRunOption name="-pf" value="conf/runtime.fp" /&gt;
  &lt;/server&gt;
&lt;/PCTASBroker&gt;
</pre>
<p>
Appserver's definition will look like this :</p>
<pre class="source">
[UBroker.AS.Test]
appserviceNameList=Test
registerNameServer=1
controllingNameServer=NS1
registrationMode=Register-IP
operatingMode=stateless
autoStart=0
srvrStartupParam=-db base/foo -pf conf/param.pf -pf conf/runtime.pf
srvrStartupProc=apsv/startup.p
srvrShutdownProc=apsv/shutdown.p
propath=build,src
uuid=!!! A RANDOMLY GENERATED UUID !!!
</pre>
<p>This definition will be integrated in <code>myubroker.properties</code> instead of standard
<code>$DLC/properties/ubroker.properties</code>
</div>

</div>

@ANALYTICS@</body>
</html>
